<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
  <meta name="theme-color" content="#0084FF"/>
  <meta charset="UTF-8" />

  <title>Omer Start Page</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" />
  <!--link rel="stylesheet" href="https://getbootstrap.com/examples/grid/grid.css"><!--nice shading for columns. good for debugging-->

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>
  
  <!-- for mobile platforms -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script>

  var getLocation = function() {
    var startPos;
    var geoOptions = {
      maximumAge: 5 * 60 * 1000,
      timeout: 10 * 1000
    }

    var geoSuccess = function(position) {
      startPos = position;
      document.getElementById('lat').value = startPos.coords.latitude;
      document.getElementById('lon').value = startPos.coords.longitude;
      //document.getElementById('link').href = '/omer?lat=' + startPos.coords.latitude + '&lon=' + startPos.coords.longitude;
      //document.location.href = '/omer?lat=' + startPos.coords.latitude + '&lon=' + startPos.coords.longitude;
      console.log(position);
    };
    var geoError = function(error) {
      console.log('Error occurred. Error code: ' + error.code);
      // error.code can be:
      //   0: unknown error
      //   1: permission denied
      //   2: position unavailable (error response from location provider)
      //   3: timed out
    };

    navigator.geolocation.getCurrentPosition(geoSuccess, geoError, geoOptions);
  };

  </script>
</head>

<body>
  <div class="container">
    <h2>Input Form for Counting Omer</h2>

    <p>During the daytime, we do not say the blessing. This will be represented as
    smaller, gray text.<br />
    Between sundown and nightfall, there are differing opinions as to whether or not one
    may count yet. This is represented by showing the next day starting from sunset, but
    with a shaded background until after nightfall.<br />
    If you are not reciting with a Minyan, then it is probably best to wait for nightfall
    proper. The time of nightfall is provided.<br />
    To save yourself from needing to enter your information every time, simply bookmark
    the resulting link. It will keep up-to-date on future visits.</p>

    <form class="form" role="form" action="/omer" style=
    "width:90%;margin-left:100">
      <div class="form-group">
        <label for="zip">Zip Code:</label> If you are not in a zipcode, do not rely on the times or days that are automatically calculated. (blank defaults to Palo Alto zip code, that is 94303)<br />
        <input type="text" name="zipcode" maxlength="5" size="2" pattern="[1-9][0-9]{0,4}" id="zip" class="form-control" placeholder="5 Digit Zip Code" />
      </div>
      <div class="form-group">
        <label for="latlon">Lat/Lon:</label> Instead of zipcode, you can enter your coordinates here (must still be somewhere that has a zipcode).<br />
        <input type="text" name="lat" id="lat" class="form-control" placeholder="Lattitude" />
        <input type="text" name="lon" id="lon" class="form-control" placeholder="Longtitude" />
        <input type="button" name="getloc" id="latlon" class="form-control" value="Current Location" onClick=getLocation() />
      </div>
      <div class="form-group">
        <label for="day">Date (optional):</label> For getting day that is not today. Won't grey out the bracha. Good for printing.<br />
        <input type="date" class="form-control" name="date" id="date" />
      </div>
      <div class="form-group">
        <label for="day">Day of the Omer (optional):</label> Leave blank to have the correct day calculated for you.<br />
        <input type="number" class="form-control" name="day" maxlength="2" size="2" id=
        "day" min="1" max="49" step="1" placeholder="Day of the Omer" />
      </div>
      <div class="form-group">
        <div class="row">
            Did you cross the International dateline? (Not everyone holds of this modifier. Consult your local orthodox Rabbi.)<br />
            <div class="col-xs-12 col-sm-10 col-sm-push-1"><input type="range" min="-1" max="1" step="1" value="0" name="dateline"/></div>
            <label class="col-xs-1 col-sm-pull-10">West</label>
            <label class="text-right col-xs-1 col-xs-offset-9 col-sm-offset-0">East</label>
        </div>
      </div>
      <input type="submit" class="btn btn-default center-block" value="Let's Count" />
    </form>
  </div>
</body>
</html>
